# Домашнее задание к занятию «Уязвимости и атаки на информационные системы» - Леонид Хорошев


------

### Задание 1

Скачайте и установите виртуальную машину Metasploitable: https://sourceforge.net/projects/metasploitable/.

![alt text](https://github.com/LeonidKhoroshev/databases/blob/main/safety/safety1.4.png)

Просканируйте эту виртуальную машину, используя **nmap**.

![alt text](https://github.com/LeonidKhoroshev/databases/blob/main/safety/safety1.1.png)
![alt text](https://github.com/LeonidKhoroshev/databases/blob/main/safety/safety1.2.png)
![alt text](https://github.com/LeonidKhoroshev/databases/blob/main/safety/safety1.3.png)

Попробуйте найти уязвимости, которым подвержена эта виртуальная машина.

Сами уязвимости можно поискать на сайте https://www.exploit-db.com/.

Для этого нужно в поиске ввести название сетевой службы, обнаруженной на атакуемой машине, и выбрать подходящие по версии уязвимости.

Какие сетевые службы в ней разрешены?

Разрешенные сетевые службы - те, у которых открыты порты, их можно наблюдать в первом скриншоте (практически в самом начале вывода на экран результатов работы утилиты nmap). В нашем случае - это протоколы сетевого уровня:
- DNS - доменный сервер имен, на скриншоте показан как domain, порт 53;
- ftp - протокол передачи файлов между хостами по сети;
- http - протокол передачи данных;
- smtp - сетевой протокол, предназначенный для передачи электронной почты;
- ssh и telnet - сетевые протоколы, позволяющие проводить удаленное управление хостами;
- ajp13  - протокол Apache для обработки входящих сообщений с веб-серверами;
- irc - протокол обмена сообщениями. 

Какие уязвимости были вами обнаружены? (список со ссылками: достаточно трёх уязвимостей):
- возможность получить доступ с root правами к службе передачи файлов ftp  https://www.exploit-db.com/exploits/49757;
- возможность получить доступ с root правами к службе обмена сообщениями irc https://www.exploit-db.com/exploits/16922;
- возможность получения доступа к интерпретатору bash через сетевую службу smtp https://www.exploit-db.com/exploits/34896.

  

### Задание 2

Проведите сканирование Metasploitable в режимах SYN, FIN, Xmas, UDP. Запишите сеансы сканирования в Wireshark.

Чем отличаются эти режимы сканирования с точки зрения сетевого трафика?

Как отвечает сервер?

Сканирование ОС Metasploitable (192.168.117.169) проведено с помощью хоста с установленной Kali linux (192.168.177.72). Обе операционные системы развернуты на виртуальных машинах, созданных в Virtualbox (в первом и втором задании ip адреса отличаются, так как домашнее задание выполнялось в разных сетях).

TCP SYN сканирование. 
```
nmap -sS 192.168.117.169
```
![alt text](https://github.com/LeonidKhoroshev/databases/blob/main/safety/safety2.5.png)
Сеанс сканирования в wireshark:
![alt text](https://github.com/LeonidKhoroshev/databases/blob/main/safety/safety2.1.1.png)
SYN - наиболее популярный тип сканирования. при таком сканировании соединение не устанавливается до конца. SYN пакет посылается, как при установке реального соединения. Ответ SYN/ACK указывают на то, что порт открыт, а RST (сброс) на то, что порт закрыт. Если после нескольких запросов ответ не пришел, то порт помечается как фильтруемый (утилита не может определить открыт порт или закрыт, так как он блокируется). 

TCP FIN сканирование.
```
nmap -sF 192.168.117.169
```
![alt text](https://github.com/LeonidKhoroshev/databases/blob/main/safety/safety2.6.png)
Сеанс сканирования в wireshark:
![alt text](https://github.com/LeonidKhoroshev/databases/blob/main/safety/safety2.2.1.png)
В отличие от SYN сканирования, в данном случае вместо флага SYN, отвечающего за контроль установки соединения, используется  флаг FIN, используемый для закрытия соединения. 

TCP Xmas сканирование.
```
nmap -sX 192.168.117.169
```
![alt text](https://github.com/LeonidKhoroshev/databases/blob/main/safety/safety2.7.png)
Сеанс сканирования в wireshark:
![alt text](https://github.com/LeonidKhoroshev/databases/blob/main/safety/safety2.3.1.png)
В отличие от двух предыдущих типов сканирования, содержащих во всех запросах одинаковые флаги (SYN и FIN соответственно), Xmas сканирование отправляет запросы с разными флагами из всех доступных для контроля соединения. Если в ответ приходит RST пакет, то порт закрыт, отсутствие ответа означает, что порт открыт или фильтруется. Порт помечается как фильтруется, если в ответ приходит ICMP ошибка.

TCP UDP сканирование.
```
nmap -sU 192.168.117.169
```
![alt text](https://github.com/LeonidKhoroshev/databases/blob/main/safety/safety2.8.png)
Сеанс сканирования в wireshark:
![alt text](https://github.com/LeonidKhoroshev/databases/blob/main/safety/safety2.4.1.png)
Cканирование работает путем посылки пустого UDP заголовка на каждый целевой порт. Принципиальное отличие от предыдущих методов сканирования - проверка именно на UDP, а не TCP пакеты. UDP сканирование происходит гораздо медленнее, чем TCP. Это связано с тем, что протоколом UDP не предусматривается явное подтверждение приема данных. 

