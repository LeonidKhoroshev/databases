# Домашнее задание к занятию «Репликация и масштабирование. Часть 1» - Леонид Хорошев


### Задание 1

На лекции рассматривались режимы репликации master-slave, master-master, опишите их различия.

В репликации master-slave один сервер выполняет роль master, то есть позволяет редактировать (вносить, удалять, изменять) данные, а остальные сервера (slave) могут только читать информацию из базы данных, в то время как в репликации master-master каждый сервер является мастером и слейвом одновременно, то есть редактировать данные можно на любой ноде.

---

### Задание 2

Выполните конфигурацию master-slave репликации, примером можно пользоваться из лекции.

1. В Яндекс облаке создаем 2 виртуальные машины Centos7 (mysql1 и mysql2) с минимальными характеристиками (в целях экономии наших ресурсов).

2. Устанавливаем на 2 машины mysql клиент и mysql сервер (устанавливаем ключ, пакетный менеджер и требуемое программное обеспечение).

```
rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022
rpm -Uvh https://dev.mysql.com/get/mysql80-community-release-el7-6.noarch.rpm
yum -y install mysql-server mysql-client
```

3. Создаем директорию для записи логов, инициализируем СУБД и предоставляем права доступа к директориям c логами и изменяемыми файлами. 

```
mkdir -p /var/log/mysql
mysqld --initialize
cat /var/log/mysqld.log
chown -R mysql: /var/log/mysql
chown -R mysql: /var/lib/mysql
```

4. Прописываем конфигурации на обоих нодах (на данном этапе критически важно прописать отличные друг от друга параметры server-id, иначе репликация не заработает).

```
nano /etc/my.cnf
```

Конфигурация mysql1

```
bind-address=0.0.0.0
server-id=1
log_bin=/var/log/mysql/mybin.log
```

Конфигурация mysql2

```
bind-address=0.0.0.0
server-id=2
log_bin=/var/log/mysql/mybin.log
```

5. Запускаем mysql на обоих нодах

```
systemctl start mysqld
systemctl status mysqld
```
![Alt text](https://github.com/LeonidKhoroshev/databases/blob/main/replication/replication2.1.png)
![Alt text](https://github.com/LeonidKhoroshev/databases/blob/main/replication/replication2.2.png)


---

## Дополнительные задания (со звёздочкой*)
Эти задания дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.

---

### Задание 3* 

Выполните конфигурацию master-master репликации. Произведите проверку.

*Приложите скриншоты конфигурации, выполнения работы: состояния и режимы работы серверов.*
