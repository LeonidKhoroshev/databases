# Домашнее задание к занятию  «Защита хоста» - Леонид Хорошев

------

### Задание 1

1. Установите **eCryptfs**.
Домашнее задание выполняется на ВМ Debian 11, развернутой в Virtualbox. 
```
apt update
apt upgrade
apt install ecryptfs-utils cryptsetup
```
![Alt text](https://github.com/LeonidKhoroshev/databases/blob/main/host/host1.1.png)

2. Добавьте пользователя cryptouser.
В Debian 11 отсутствует опция --encrypt-home, которая при использовании команды  adduser создает зашифрованный каталог для нового пользователя, поэтому задание выполняется в несколько этапов.
```
sudo adduser cryptouser
usermod -aG sudo cryptouser
```
![Alt text](https://github.com/LeonidKhoroshev/databases/blob/main/host/host1.2.png)

3. Зашифруйте домашний каталог пользователя с помощью eCryptfs.
Для шифрования каталога добавляем соответствующий модуль ядра и устанавливаем утилиту rsync (необходима для копирования и синхронизации данных)
```
apt install rsync
modprobe ecryptfs
su cryptouser
sudo ecryptfs-migrate-home -u cryptouser
```
![Alt text](https://github.com/LeonidKhoroshev/databases/blob/main/host/host1.3.png)

Переходим в домашний каталог под логином нового пользователя, создаем несколько файлов и смотрим содержимое домашнего каталога.
```
cd cryptouser
sudo touch 123 456
```
![Alt text](https://github.com/LeonidKhoroshev/databases/blob/main/host/host1.4.png)
![Alt text](https://github.com/LeonidKhoroshev/databases/blob/main/host/host1.5.png)

 

### Задание 2

1. Установите поддержку **LUKS**.
2. Создайте небольшой раздел, например, 100 Мб.
3. Зашифруйте созданный раздел с помощью LUKS.

*В качестве ответа пришлите снимки экрана с поэтапным выполнением задания.*


## Дополнительные задания (со звёздочкой*)

Эти задания дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале

### Задание 3 *

1. Установите **apparmor**.
2. Повторите эксперимент, указанный в лекции.
3. Отключите (удалите) apparmor.


*В качестве ответа пришлите снимки экрана с поэтапным выполнением задания.*



